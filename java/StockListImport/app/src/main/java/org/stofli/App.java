/*
 * This source file was generated by the Gradle 'init' task
 */
package org.stofli;

import java.io.IOException;
import java.sql.Connection;
import java.util.List;
import java.util.Properties;

import org.stofli.jquants.client.ApiClient;
import org.stofli.tse.model.TseData;
import org.stofli.tse.service.TseService;
import org.stofli.util.DbUtil;


public class App {

    public static void main(String[] args) throws IOException, InterruptedException {
        try (Connection conn = DbUtil.getConnection()) {
            TseService service = new TseService(conn);
            service.truncateTable();
            List<TseData> dataList = service.importFromExcel("data_j.xls");
            service.saveToDatabase(dataList);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
        Properties properties = new Properties();
        // try {
        //     InputStream is = App.class.getClassLoader().getResourceAsStream("JQuants.properties");
        //     properties.load(is);
        // } catch (IOException e) {
        //     e.printStackTrace();
        // }
        // imoprtTseCompnayFromExcelData();

        ApiClient jquantClient = new ApiClient(properties.getProperty("mailAdress"), properties.getProperty("password"));
        jquantClient.getDailyQuates("9432", "20240306");
        jquantClient.getDailyQuates("1332", "20240306");


     // private static void imoprtTseCompnayFromExcelData() {
        // Dotenv dotenv = Dotenv.load(); // .envを読み込む
        //
        // String host = dotenv.get("NEON_HOST");
        // String port = dotenv.get("NEON_PORT");
        // String db = dotenv.get("NEON_DB");
        // String user = dotenv.get("NEON_USER");
        // String pass = dotenv.get("NEON_PASSWORD");
        // String uri = dotenv.get("NEON_URI");
        // Excel excelDataBook = new TseExcel("data_j.xls");
        //
        // List<TseData> dataList = excelDataBook.readData();
        //
        // // String url = "jdbc:mysql://localhost:3306/stock";
        // // uri = uri.replace("postgresql://","jdbc:postgresql://");
        // String url = "jdbc:postgresql://" + host + ":5432/" + db + "?sslmode=require";
        //
        // try {
        //
        // // Class.forName("com.mysql.cj.jdbc.Driver");
        // Class.forName("org.postgresql.Driver");
        //
        // Connection conn = DriverManager.getConnection(url, user, pass);
        // StockCompanyDao scDao = new StockCompanyDao(conn);
        // scDao.insert(dataList);
        //
        // } catch (SQLException | ClassNotFoundException e) {
        // e.printStackTrace();
        // }
    // }
}
